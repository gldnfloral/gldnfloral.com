---
interface Props {
  currentPage: number;
  totalPages: number;
}

const { currentPage, totalPages } = Astro.props;

const buildPageHref = (pageNumber: number): string =>
  pageNumber === 1 ? "/gallery" : `/gallery/${pageNumber}`;

const previousPage = currentPage > 1 ? currentPage - 1 : null;
const nextPage = currentPage < totalPages ? currentPage + 1 : null;
const pageNumbers = Array.from({ length: totalPages }, (_, index) => index + 1);
---

<nav class="pagination" aria-label="Gallery pagination">
  {
    previousPage ? (
      <a class="pager-link" href={buildPageHref(previousPage)}>
        Previous
      </a>
    ) : (
      <span class="pager-link is-disabled" aria-disabled="true">Previous</span>
    )
  }

  <ol>
    {
      pageNumbers.map((pageNumber) => (
        <li>
          <a
            href={buildPageHref(pageNumber)}
            aria-current={currentPage === pageNumber ? "page" : undefined}
            aria-label={`Go to gallery page ${pageNumber}`}
          >
            {pageNumber}
          </a>
        </li>
      ))
    }
  </ol>

  {
    nextPage ? (
      <a class="pager-link" href={buildPageHref(nextPage)}>
        Next
      </a>
    ) : (
      <span class="pager-link is-disabled" aria-disabled="true">Next</span>
    )
  }
</nav>

<style>
  .pagination {
    align-items: center;
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-3);
    justify-content: center;
    margin-top: var(--space-7);
  }

  ol {
    display: flex;
    gap: var(--space-2);
    list-style: none;
    margin: 0;
    padding: 0;
  }

  a,
  span {
    align-items: center;
    border: 1px solid var(--color-border);
    border-radius: 999px;
    color: var(--color-text);
    display: inline-flex;
    font-size: 0.95rem;
    justify-content: center;
    min-height: 2.25rem;
    min-width: 2.25rem;
    padding-inline: var(--space-3);
    text-decoration: none;
  }

  a:hover {
    border-color: var(--color-heading);
    color: var(--color-heading);
  }

  a[aria-current="page"] {
    background: var(--color-sandy-brown);
    border-color: var(--color-sandy-brown);
    color: var(--color-heading);
    font-weight: 600;
  }

  .pager-link {
    font-weight: 500;
  }

  .is-disabled {
    cursor: not-allowed;
    opacity: 0.5;
    pointer-events: none;
  }
</style>
